# DEVELOPING

## Todo

* <del>数据库会报错 `Document update conflict`</del>
  > 需要添加线程锁， 在多线程的情况下会出现多个线程同时去操作数据库的情况
  > 
  > 数据库加锁可能影响性能， 暂且显示报错信息不影响节点程序正常运行即可
* 在创建区块时交易校验失败，但是可以创建区块，存在逻辑问题
  > 校验失败出现报错会直接返回上一个函数， 导致能够正常出块
  > 
  > 但是第一次校验成功而校验区块时校验出现问题
  > 
  > upd 2022/3/4:
  > 
  > 该问题没有复现处理， 后续如果出现问题再进行测试
* 优化修复投票后可能存在的性能问题
* 交易检索时间复杂度o(n)， 需要进行优化
* couchdb考虑使用docker， 避免每次服务器都需要安装couchdb

## 2022/3/4

* main命令行测试函数中新增init函数
  > `python3 main.py init --node_id=2 --main_node=0`
* 修复了多线程的情况下client发送数据失败的问题
* 新增vote_center给多线程下的client进行信息发送

## 2022/3/6
* 修复未投票结束就产生区块的问题
* 新增了client和server的线程锁用于处理投票的问题（可能存在性能的影响， 需要进行优化）