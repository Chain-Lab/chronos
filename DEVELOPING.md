# DEVELOPING

## Todo

* 数据库会报错 `Document update conflict`
  > 需要添加线程锁， 在多线程的情况下会出现多个线程同时去操作数据库的情况
* 在创建区块时交易校验失败，但是可以创建区块，存在逻辑问题
  > 校验失败出现报错会直接返回上一个函数， 导致能够正常出块
  > 
  > 但是第一次校验成功而校验区块时校验出现问题
  > 
  > upd 2022/3/4:
  > 
  > 该问题没有复现处理， 后续如果出现问题再进行测试
* 投票没有结束就产生区块，需要查看共识部分的逻辑
  > server的验证投票完成逻辑存在问题， 需要进行修改
  > 
  > upd 2022/3/4:
  > 
  > 该问题仍然存在， 原因是两个node之间的信息同步完成了，但是和其他节点的投票信息的同步没有完成， 需要所有client线程都完成信息同步
* couchdb考虑使用docker， 避免每次服务器都需要安装couchdb

## 2022/3/4

* main命令行测试函数中新增init函数
  > `python3 main.py init --node_id=2 --main_node=0`
* 修复了多线程的情况下client发送数据失败的问题
* 新增vote_center给多线程下的client进行信息发送